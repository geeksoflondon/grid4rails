// Real-time updating via PubNub
function process_pubnub(e){e.slot!==null&&($("body").attr("id")=="talk-assign"||"talk-move")&&(slot=e.slot,slot.talk_id!==null&&$("#slot-"+e.slot.id+"-select").length>0&&$("#slot-"+e.slot.id+"-select").removeClass("green").addClass("red").val("Taken").attr("disabled",!0)),e.slot!==null&&$("body").attr("id")=="date-grid"&&slot.talk_id!==null&&$.getJSON("/s/talks/"+e.slot.talk_id+".json",function(t){$("#slot-"+e.slot.id).parent().hasClass("empty")?$("#slot-"+e.slot.id).children().first().append('<h4 class="heading title"><a href="/'+getCookie("version")+"/talks/"+t.talk.id+'">'+t.talk.title+"</a></h4>"):($("#slot-"+e.slot.id).children().first().find("h4 > a").attr("href","/"+getCookie("version")+"/talks/"+t.talk.id+""),$("#slot-"+e.slot.id).children().first().find("h4 > a").text(t.talk.title))}),e.slot!==null&&$("body").attr("id")=="date-grid"&&slot.talk_id==null&&$("#slot-"+e.slot.id).parent().hasClass("empty")!==!0&&$("#slot-"+e.slot.id).children().first().find(".heading").empty()}function init_pubsubhubbub(){PUBNUB.subscribe({channel:"griddy",error:function(){},callback:function(e){process_pubnub(e)},connect:function(){}})}$(document).ready(function(){init_pubsubhubbub()});